System.register(["jimu-core"],(function(e,o){var t={};return{setters:[function(e){t.DataSourceManager=e.DataSourceManager,t.React=e.React}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=t}},o={};function l(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,l),i.exports}l.d=(e,o)=>{for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var n={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(n),l.d(n,{__set_webpack_public_path__:()=>a,default:()=>i});var e=l(244);function o(e){return(e<10?"0":"")+e}function t(e){return`${e.getUTCFullYear()}-${o(e.getUTCMonth()+1)}-${o(e.getUTCDate())} ${o(e.getUTCHours())}:${o(e.getUTCMinutes())}:${o(e.getUTCSeconds())}`}const i=l=>{var n,i,a,r,d,u,c,v,f,g,s,m,b,p,y,S,h,D,F,w,T,C,M;const R=Number(null!==(i=null===(n=l.config)||void 0===n?void 0:n.startYear)&&void 0!==i?i:2024),$=Number(null!==(r=null===(a=l.config)||void 0===a?void 0:a.startMonth)&&void 0!==r?r:0),_=(null===(u=null===(d=l.config)||void 0===d?void 0:d.dateField)||void 0===u?void 0:u.trim())||"Sampling_start_DateTime",x=(null===(c=l.config)||void 0===c?void 0:c.labelColor)||"#e5e7eb",E=(null===(v=l.config)||void 0===v?void 0:v.textColor)||"#f9fafb",U=(null===(f=l.config)||void 0===f?void 0:f.dropdownBg)||"#0b0b0b",j=(null===(g=l.config)||void 0===g?void 0:g.dropdownTextColor)||"#f9fafb",z=(null===(s=l.config)||void 0===s?void 0:s.dropdownBorderColor)||"#3f3f46",Y="number"==typeof(null===(m=l.config)||void 0===m?void 0:m.borderRadius)?null===(b=l.config)||void 0===b?void 0:b.borderRadius:10,N=!!(null===(p=l.config)||void 0===p?void 0:p.labelBold),P=!!(null===(y=l.config)||void 0===y?void 0:y.labelItalic),B=!!(null===(S=l.config)||void 0===S?void 0:S.textBold),I=!!(null===(h=l.config)||void 0===h?void 0:h.textItalic),O=(null===(D=l.config)||void 0===D?void 0:D.labelFontFamily)||"inherit",k=(null===(F=l.config)||void 0===F?void 0:F.bodyFontFamily)||"inherit",A="number"==typeof(null===(w=l.config)||void 0===w?void 0:w.labelFontSize)?null===(T=l.config)||void 0===T?void 0:T.labelFontSize:14,Q="number"==typeof(null===(C=l.config)||void 0===C?void 0:C.bodyFontSize)?null===(M=l.config)||void 0===M?void 0:M.bodyFontSize:12,W=e.React.useMemo((()=>{const e=[],t=new Intl.DateTimeFormat(void 0,{month:"long",year:"numeric"}),l=new Date,n=new Date(l.getFullYear(),l.getMonth(),1),i=new Date(R,$,1);for(let l=new Date(i.getFullYear(),i.getMonth(),1);l<=n;l=new Date(l.getFullYear(),l.getMonth()+1,1))e.push({label:t.format(l),value:`${l.getFullYear()}-${o(l.getMonth()+1)}`,y:l.getFullYear(),m:l.getMonth()});return e}),[R,$]),[q,H]=e.React.useState("");e.React.useEffect((()=>{W.length?H(W[W.length-1].value):H("")}),[W]),e.React.useEffect((()=>{var o,n,i,a,r,d,u,c;const v=null===(n=null===(o=l.useDataSources)||void 0===o?void 0:o[0])||void 0===n?void 0:n.dataSourceId;if(!v||!_||!q)return;const f=e.DataSourceManager.getInstance().getDataSource(v);if(!f)return;const[g,s]=q.split("-").map((e=>Number(e))),m=new Date(Date.UTC(g,s-1,1,0,0,0)),b=new Date(Date.UTC(g,s-1+1,1,0,0,0)),p=`${_} >= DATE '${t(m)}' AND ${_} < DATE '${t(b)}'`,y={where:p};try{null===(a=(i=f).updateQueryParams)||void 0===a||a.call(i,y,l.id),null===(d=(r=f).setQueryParams)||void 0===d||d.call(r,y,l.id),null===(c=(u=f).setLayerDefinition)||void 0===c||c.call(u,{where:p})}catch(e){console.error("[chart-filter] Failed to update query",e)}}),[q,_,l.useDataSources,l.id]);const L={display:"block",marginBottom:6,color:x,fontWeight:N?"bold":"normal",fontStyle:P?"italic":"normal",fontFamily:O,fontSize:A},G={marginTop:8,fontSize:Q,opacity:.8,fontWeight:B?"bold":"normal",fontStyle:I?"italic":"normal",fontFamily:k};return e.React.createElement("div",{className:"jimu-widget",style:{padding:12,color:E,fontFamily:k}},e.React.createElement("label",{style:L},"Select month"),e.React.createElement("select",{style:{width:"100%",padding:8,backgroundColor:U,color:j,border:`1px solid ${z}`,borderRadius:Y,outline:"none",fontFamily:k,fontSize:Q},value:q,onChange:e=>H(e.target.value),className:"chart-filter__select"},W.map((o=>e.React.createElement("option",{key:o.value,value:o.value},o.label)))),e.React.createElement("div",{style:G},"Selected: ",q||"\u2014"))};function a(e){l.p=e}})(),n})())}}}));